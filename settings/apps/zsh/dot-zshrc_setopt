# vim: ft=zsh

# dot-zshrc_setopt

# ORIGIN: 2020-12-10 by hmr

echo "Processing dot-zsh_setopt"

#setopt no_aliases              #off
#setopt alias_func_def          #off
#setopt all_export              #off
# カーソル位置は保持したままファイル名一覧を順次その場で表示
#setopt no_always_lastprompt    #off
setopt always_last_prompt       #on
#setopt always_toend            #off
#setopt append_create           #off
#setopt no_append_history       #off
setopt auto_cd                  #off
#setopt auto_continue           #off
#setopt no_auto_list            #off
setopt auto_list                #on
# 補完キー連打で順に補完候補を自動で補完
#setopt no_auto_menu            #off
setopt auto_menu                #on
#setopt auto_name_dirs          #off
#setopt no_auto_param_keys      #off
# カッコの対応などを自動的に補完
setopt auto_param_keys          #on
# ディレクトリ名の補完で末尾の / を自動的に付加し、次の補完に備える
setopt auto_param_slash         #on
#setopt no_auto_param_slash     #off
#setopt no_auto_remove_slash    #off
setopt auto_pushd               #off
#setopt auto_resume             #off
#setopt no_bad_pattern          #off
#setopt no_bang_hist            #off
#setopt no_bare_glob_qual       #off
#setopt bash_autolist           #off
#setopt bash_rematch            #off
setopt no_beep                  #off
#setopt no_bgnice               #off
#setopt brace_ccl               #off
#setopt bsd_echo                #off
#setopt no_case_glob            #off
#setopt no_case_match           #off
#setopt cbases                  #off
setopt cd_able_vars             #off  #try to expand the expression as if it were preceded by a ‘~’
#setopt cd_silent               #off
#setopt chase_dots              #off
#setopt chase_links             #off
#setopt no_check_jobs           #off
#setopt no_check_running_jobs   #off
#setopt no_clobber              #off
setopt combining_chars          #on
#setopt complete_aliases        #off
# 語の途中でもカーソル位置で補完
setopt complete_in_word         #off
#setopt continue_on_error       #off
#setopt correct                  #off
#setopt correct_all              #off
#setopt c_precedences           #off
#setopt csh_junkie_history      #off
#setopt csh_junkie_loops        #off
#setopt csh_junkie_quotes       #off
#setopt csh_null_cmd            #off
#setopt csh_null_glob           #off
#setopt no_debug_before_cmd     #off
#setopt dvorak                  #off
#setopt emacs                   #off
#setopt no_equals               #off
setopt equals                   #on
#setopt err_exit                #off
#setopt err_return              #off
#setopt no_eval_line_no         #off
#setopt no_exec                 #off
# 拡張グロブで補完(~とか^とか。例えばless *.txt~memo.txt ならmemo.txt 以外の *.txt にマッチ)
setopt extended_glob            #off
#setopt extended_history        #off
#setopt no_flow_control         #off
#setopt force_float             #off
#setopt no_function_arg_zero    #off
#setopt no_glob                 #off
#setopt no_global_export        #off
#setopt no_global_rcs           #off
#setopt glob_assign             #off
#setopt glob_complete           #off
# 明確なドットの指定なしで.から始まるファイルをマッチ
setopt glob_dots                #off
#setopt glob_star_short         #off
#setopt glob_subst              #off
#setopt no_hash_cmds            #off
#setopt no_hash_dirs            #off
#setopt hash_executables_only   #off
#setopt no_hash_list_all        #off
#setopt hist_allow_clobber      #off
#setopt no_hist_beep            #off
#setopt hist_expired_ups_first  #off
#setopt hist_fcntl_lock         #off
#setopt hist_find_no_dups       #off
#setopt hist_ignore_all_dups    #off
setopt hist_ignore_dups         #on
#setopt hist_ignore_space       #off
#setopt hist_lex_words          #off
#setopt hist_no_functions       #off
#setopt hist_no_store           #off
#setopt hist_reduce_blanks      #off
#setopt no_hist_save_by_copy    #off
#setopt hist_save_no_dups       #off
#setopt hist_subst_pattern      #off
#setopt hist_verify             #off
#setopt no_hup                  #off
#setopt ignore_braces           #off
#setopt ignore_close_braces     #off
#setopt ignore_eof              #off
#setopt incappend_history       #off
#setopt incappend_history_time  #off
#setopt interactive             #on
# コマンドラインでも # 以降をコメントと見なす
setopt interactive_comments     #on
#setopt ksh_arrays              #off
#setopt ksh_autoload            #off
#setopt ksh_glob                #off
#setopt ksh_option_print        #off
#setopt ksh_typeset             #off
#setopt ksh_zero_subscript      #off
#setopt no_list_ambiguous       #off
#setopt no_list_beep            #off
#setopt list_packed             #off
#setopt list_rows_first         #off
# 補完候補一覧でファイルの種別を識別マーク表示 (訳注:ls -F の記号)
#setopt no_list_types           #off
setopt list_types               #on
#setopt local_loops             #off
#setopt local_options           #off
#setopt local_patterns          #off
#setopt local_traps             #off
#setopt login                   #off
#setopt long_list_jobs          #off
# コマンドラインの引数で --prefix=/usr などの = 以降でも補完できる
setopt magic_equal_subst        #off
#setopt mail_warning            #off
# ファイル名の展開でディレクトリにマッチした場合 末尾に / を付加
setopt mark_dirs                #off
#setopt menu_complete           #off
#setopt monitor                 #on
#setopt no_multi_byte           #off
#setopt no_multi_func_def       #off
#setopt no_multi_os             #off
#setopt no_nomatch              #off
#setopt no_notify               #off
#setopt null_glob               #off
#setopt numeric_glob_sort       #off
#setopt octal_zeroes            #off
#setopt over_strike             #off
#setopt path_dirs               #off
#setopt path_script             #off
#setopt pipe_fail               #off
#setopt posix_aliases           #off
#setopt posix_argzero           #off
#setopt posix_builtins          #off
#setopt posix_cd                #off
#setopt posix_identifiers       #off
#setopt posix_jobs              #off
#setopt posix_strings           #off
#setopt posix_traps             #off
# 日本語ファイル名等8ビットを通す
setopt print_eight_bit          #off
#setopt print_exit_value        #off
#setopt privileged              #off
#setopt prompt_bang             #off
#setopt no_prompt_cr            #off
#setopt no_prompt_percent       #off
#setopt no_prompt_sp            #off
setopt prompt_subst             #on
#setopt pushd_ignore_dups       #off
#setopt pushd_minus             #off
#setopt pushd_silent            #off
#setopt pushd_to_home           #off
#setopt rc_expand_param         #off
#setopt rc_quotes               #off
#setopt no_rcs                  #off
#setopt rec_exact               #off
#setopt rematch_pcre            #off
#setopt restricted              #off
#setopt rm_star_silent          #off
#setopt rm_star_wait            #off
# シェルインスタンス間での履歴の共有
setopt share_history            #off
#setopt sh_file_expansion       #off
#setopt sh_glob                 #off
#setopt sh_inst_din             #on
#setopt sh_null_cmd             #off
#setopt sh_option_letters       #off
#setopt no_short_loops          #off
#setopt sh_word_split           #off
#setopt single_command          #off
#setopt single_line_zle         #off
#setopt source_trace            #off
#setopt sun_keyboard_hack       #off
#setopt transient_rprompt       #off
#setopt traps_async             #off
#setopt typeset_silent          #off
#setopt no_unset                #off
#setopt verbose                 #off
#setopt vi                      #off
#setopt warn_create_global      #off
#setopt warn_nested_var         #off
#setopt xtrace                  #off
#setopt zle                     #on

## Auto correction ignorance settings
CORRECT_IGNORE='_*'
CORRECT_IGNORE_FILE='.*'

##補完に関するオプション [http://voidy21.hatenablog.jp/entry/20090902/1251918174]
# 補完候補を ←↓↑→ でも選択出来るようにする
zstyle ':completion:*:default' menu select=2

# 補完関数の表示を過剰にする
zstyle ':completion:*' verbose yes
# _complete: 普通の補完関数
# _approximate: ミススペルを訂正した上で補完を行う。
# _match: *などのグロブによってコマンドを補完できる(例えばvi* と打つとviとかvimとか補完候補が表示される)
# _expand: グロブや変数の展開を行う。もともとあった展開と比べて、細かい制御が可能
# _history: 履歴から補完を行う。_history_complete_wordから使われる
# _prefix: カーソルの位置で補完を行う
zstyle ':completion:*' completer _complete _approximate _prefix _expand _match _list _history
zstyle ':completion:*:approximate' max-errors 2 NUMERIC
zstyle ':completion:*:messages' format $YELLOW'%d'$DEFAULT
zstyle ':completion:*:warnings' format $RED'No matches for:'$YELLOW' %d'$DEFAULT
zstyle ':completion:*:descriptions' format $YELLOW'completing %B%d%b'$DEFAULT
zstyle ':completion:*:corrections' format $YELLOW'%B%d '$RED'(errors: %e)%b'$DEFAULT
zstyle ':completion:*:options' description 'yes'

# グループ名に空文字列を指定すると，マッチ対象のタグ名がグループ名に使われる。
# # したがって，すべての マッチ種別を別々に表示させたいなら以下のようにする
zstyle ':completion:*' group-name ''

# オブジェクトファイルとか中間ファイルとかはfileとして補完させない
zstyle ':completion:*:*files' ignored-patterns '*?.o' '*?~' '*\#'

# ディレクトリを切り替える時の色々な補完スタイル
# あらかじめcdpathを適当に設定しておく
cdpath=(~ ~/src/ ~/src/gpprofiles/settings/apps/)

# カレントディレクトリに候補がない場合のみ cdpath 上のディレクトリを候補に出す
zstyle ':completion:*:cd:*' tag-order local-directories path-directories

#cd は親ディレクトリからカレントディレクトリを選択しないので表示させないようにする (例: cd ../<TAB>):
zstyle ':completion:*:cd:*' ignore-parents parent pwd

#LS_COLORSを設定しておく
export LS_COLORS='di=34:ln=35:so=32:pi=33:ex=31:bd=46;34:cd=43;34:su=41;30:sg=46;30:tw=42;30:ow=43;30'

#ファイル補完候補に色を付ける
zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}

# apt-getとかdpkgコマンドをキャッシュを使って速くする
zstyle ':completion:*' use-cache true

#オプションとかを表示するときのセパレータを指定(デフォルトは'--')
zstyle ':completion:*' list-separator '-->'

# 大文字小文字を同一視。ただしわざと入力した大文字はそのまま。
zstyle ':completion:*' matcher-list '' 'm:{a-z}={A-Z}' '+m:{A-Z}={a-z}'

# 変数の添字を補完する
zstyle ':completion:*:*:-subscript-:*' tag-order indexes parameters

# manの補完をセクション番号別に表示させる
zstyle ':completion:*:manuals' separate-sections true

